<!DOCTYPE html>
<html>
    <head>
        <style>
            #testbox{
                position:absolute;
                top:5vh;
                left:5vw;
                color:greenyellow;
                font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
                font-size:20pt;
            }
        </style>
    </head>
    <body>
        <div id="testbox">nothing yett</div>
        <div id="status">playing</div>
        
    </body>
    <script>
        window.addEventListener('load', function(){
            const hello = {
                event: "pusher:connection_established",
                channel: 'this.name',
                data: {activity_timeout:1000, socket_id:''},
                origin: {name:'HiHaHoJSApi', client:true}
            }
            console.log(hello)
            window.parent.postMessage(hello,'*');
        })
        window.addEventListener("message", receiveMessage, false);
        textbox = document.getElementById('testbox')
        playing=false;
        function receiveMessage(event){
                raw = event.data
                console.log(raw)
                response = JSON.parse(raw);
                if (response.origin.name !== 'HiHaHoJSApi'){
                    return;
                }
                if (response.type === 'textedit'){
                    textbox.innerHTML = response.text;
                }
            }
    </script>
</html>
