<!DOCTYPE html>
<html>
    <head>
        <style>
            #testbox{
                position:absolute;
                top:5vh;
                left:5vw;
                color:greenyellow;
                font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
                font-size:20pt;
            }
        </style>
    </head>
    <body>
        <div id="testbox">nothing yet</div>
        <div id="status">playing</div>
        
    </body>
    <script>
        source = 'https://player.hihaho.com/embed/38ab3228-05c1-4d7c-8f46-ba89325965b6?api=true'
        test = document.getElementById('testbox')
        window.addEventListener('load', function(){
            loadDoc()
        })

        function loadDoc(){
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    test.innerHTML = this.responseText;
                }
            };
            xhttp.open('GET','ajax.txt',true)
            xhttp.send()
        }

        window.addEventListener("message", receiveMessage, false);
        textbox = document.getElementById('testbox')
        playing=false;
        function receiveMessage(event){
                raw = event.data
                console.log(raw)
                response = JSON.parse(raw);
                if (response.origin.name !== 'HiHaHoJSApi'){
                    return;
                }
                if (response.type === 'textedit'){
                    textbox.innerHTML = response.text;
                }
            }
    </script>
</html>
